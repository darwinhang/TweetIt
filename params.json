{"name":"Tweetit","tagline":"Chrome extension that allows you to easily quote webpage snippets","body":"# This is the demo page for TweetIt\r\n\r\n## About\r\nAt first I wanted to create a chrome extension that replicated the features found on Medium.com and many other websites. I also wanted to get some experience with chrome extensions before I tackled chrome apps. Anyway, This page also works as a demo site. I was able to extract the core functionality into a module that wasn't reliant on the chrome API so that it could be used in other places. While it needs a bit of fine tuning, it is at least usable.\r\n\r\n## So give it a try\r\nSelect text on this page and you'll see a rather ugly \"Tweet It\" pop up. Click on it to tweet the highlighted text.\r\n\r\n<script> \r\n\r\nvar TweetIt = (function() {\r\n\t\r\n\tvar selectedText =  {\r\n\t\t\"quote\": '',\r\n\t\t\"url\": ''\r\n\t};\r\n\r\n\treturn {\r\n\r\n\t\tlimitQuote: function(quote){\r\n\t\tif (quote.length >= 100) {\r\n\t\t\tvar newQuote =  quote.slice(0, 97);\r\n\t\t\treturn newQuote + '...'\r\n\t\t}\r\n\t\treturn quote;\r\n\t\t},\r\n\r\n\t\tselected: function (ev) {\r\n\t\t\tvar highlighted = window.getSelection();\r\n\t\t\tvar highlightedText = highlighted.toString();\r\n\t\t\tvar currentPage = window.location.href;\r\n\t\t\tthis.removeAnchor();\r\n\r\n\t\t\tif (highlightedText.length <= 0) {\r\n\t\t\t\treturn false;\r\n\t\t\t} \r\n\t\t\telse {\r\n\t\t\t\tvar range = window.getSelection().getRangeAt(0);\r\n\t\t\t\tvar tweetAnchor = document.createElement('span');\r\n\t\t\t\ttweetAnchor.setAttribute('id', 'tweet-anchor');\r\n\r\n\t\t\t\t// bind callback function to module, otherwise the callback\r\n\t\t\t\t// function will be bound to the tweetAnchor\r\n\t\t\t\tvar newTweet = this.tweetIt.bind(TweetIt);\r\n\t\t\t\ttweetAnchor.addEventListener('click', newTweet);\r\n\t\t\t\trange.insertNode(tweetAnchor);\r\n\t\t\t\tvar what = range.getBoundingClientRect();\r\n\t\t\t\tvar left = what.left, bottom = what.bottom;\r\n\t\t\t\tselectedText.quote = highlightedText;\r\n\t\t\t\tselectedText.url = currentPage;\r\n\t\t\t}\r\n\t\t\treturn false;\r\n\t\t},\r\n\r\n\t\ttweetIt: function(ev) {\r\n\t\t\tev.stopPropagation();\r\n\r\n\t\t\tvar url = 'https://twitter.com/intent/tweet';\r\n\r\n\t\t\tvar quoteText = encodeURIComponent('\"' + this.limitQuote(selectedText.quote) + '\"');\r\n\t\t\tvar fullURI = url + '?text=' + quoteText + '&url=' + encodeURIComponent(selectedText.url);\r\n\t\t\twindow.open(fullURI);\r\n\r\n\t\t\tthis.removeAnchor();\r\n\t\t},\r\n\r\n\t\tremoveAnchor: function () {\r\n\t\t\tvar found = false;\r\n\t\t\tdo {\r\n\t\t\t\tvar existingAnchor = document.getElementById('tweet-anchor');\r\n\t\t\t\tif (existingAnchor) {\r\n\t\t\t\t\texistingAnchor.remove();\r\n\t\t\t\t\tfound = true;\r\n\t\t\t\t} \r\n\t\t\t\telse {\r\n\t\t\t\t\tfound = false;\r\n\t\t\t\t}\r\n\t\t\t} while (found);\r\n\t\t\treturn false;\r\n\t\t}\r\n\t}\r\n})();\r\n\r\ndocument.body.addEventListener('click' , function(){\r\n\tTweetIt.selected();\r\n}); \r\n</script>","google":"UA-59160574-1","note":"Don't delete this file! It's used internally to help with page regeneration."}